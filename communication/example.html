<!doctype html>
<html>
    <head>
        <meta charset='utf-8'>
        <title>Money Time</title>
        <link rel='stylesheet' href='css/main.css'>
        <link href='http://fonts.googleapis.com/css?family=Quicksand:400,700' rel='stylesheet' type='text/css'>
    </head>

    <body>
        <div id='container'>
            <h1>
                Money Time
            </h1>
            <hr>
            <FORM NAME='myform' ACTION='' METHOD='GET'>

                <div class='question'>
                    How much is your monthly income?
                </div>
                <div class='answer'>
                    <INPUT type='text' id='moneyEarned'> USD
                </div>

                <div class='question'>
                    How much money remains (after taxes and expenses)?
                </div>
                <div class='answer'>
                    <INPUT type='text' id='moneyRemaining'> USD
                </div>

                <div class='question'>
                    How much free time do you have per week?
                </div>
                <div class='answer'>
                    <INPUT type='text' id='freeTime'> USD
                </div>

                <div class='question'>
                    How much would you charge for working an extra hour?
                </div>
                <div class='answer'>
                    <INPUT type='text' id='paraEarning'> USD
                </div>

                <div class='question'>
                    How much would you pay to save you 2 hours of work?
                </div>
                <div class='answer'>
                    <INPUT type='text' id='paraTime'> USD
                </div>

                <div class='question'>
                    For how long would you wait in line for a $100 coupon?
                </div>
                <div class='answer'>
                    <INPUT type='text' id='paraSaving'> MIN
                </div>

                <div class='question'>
                </div>
                <div class='answer'>
                    <button id='theButton' type='button' onClick='validateForm()'>Enter</button>
                </div>
            </FORM>
        </div>

    <script type='text/javascript'> 

        //Selecting the inputs
        var inputs = [];
        inputs = document.getElementsByTagName('input');

        checkExisting();

        //0. Check for existing values
        function checkExisting(){
            for(var i = 0; i < inputs.length; i++){
                //Is there a value already?
                //Note: our localStorage variables have the same name as our id's
                if(localStorage.getItem(inputs[i].id) != ''){
                    inputs[i].value = localStorage.getItem(inputs[i].id);
                }
            }
        }

        //1. Validate form
        function validateForm(){
            var isMissing = false;
            for(var i = 0; i < inputs.length; i++){
                if(inputs[i].value == ''){
                    isMissing = true;
                }
            }

            //Any field missing?
            if(isMissing){
                alert('You have to fill out all fields!');    
            }else{
                saveValues(inputs);
                // alert ('Your values have been saved. You can modify your parameters by coming back to this page');
                var newAlert = document.createElement('p');
                newAlert.innerHTML = 'Your values have been saved. You can modify your parameters by coming back to this page';
                var parentDiv = document.getElementById('container');
                parentDiv.appendChild(newAlert);
            }
        }

        //2. Save values
        function saveValues(){
            for(var i = 0; i < inputs.length; i++){
                //Saving a localStorage value with the same name as the input id
                localStorage[inputs[i].id] = inputs[i].value;
            }
        }

    </script>

    </body>
</html>
